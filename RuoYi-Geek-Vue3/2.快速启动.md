# 准备工作

```
JDK >= 17 (推荐17版本)
Mysql >= 8.3.0 (推荐8.3.0版本)
Redis >= 5.0
Maven >= 3.1
Node >= 18
```

# 运行系统

前往 `Gitee`下载页面([Geek-XD/RuoYi-Geek-Vue3 - 码云 - 开源中国 (gitee.com)](https://gitee.com/geek-xd/ruoyi-geek-vue3))下载解压到工作目录

### 后端运行

1、导入到 `VSCode`，菜单 `文件` -> `打开文件夹`，然后找到启动文件 `RuoYiApplication.java`
2、创建数据库 `ry`并运行数据库文件
3、打开项目运行 `ruoyi.RuoYiApplication.java`，出现 `RY GEEK`表示启动成功

## 前端运行

```bash
# 克隆项目
git clone https://gitee.com/geek-xd/ruoyi-geek-vue3.git

# 进入项目目录
cd ruoyi-geek-vue3

# 安装依赖
npm install --registry=https://registry.npmmirror.com

# 启动服务
yarn dev

# 构建测试环境 yarn build:stage
# 构建生产环境 yarn build:prod
# 前端访问地址 http://localhost:80
```

4、打开浏览器，输入：([http://localhost:80 ](http://localhost/)) 默认账户/密码 `admin/admin123`）
若能正确展示登录页面，并能成功登录，菜单及页面展示正常，则表明环境搭建成功

# 必要配置

修改数据库连接，编辑 `resources`目录下的 `application-druid.yml`

```
# 数据源配置
spring:
    datasource:
        type: com.alibaba.druid.pool.DruidDataSource
        driverClassName: com.mysql.cj.jdbc.Driver
        dynamic:
            primary: MASTER
            datasource:
                # 主库数据源
                MASTER:
                    url: 数据库地址
                    username: 数据库账号
                    password: 数据库密码
```

* 修改服务器配置，`编辑resources目录下的application.yml`

```
# 开发环境配置
server:
  # 服务器的HTTP端口，默认为8080
  port: 端口
  servlet:
    # 应用的访问路径
    context-path: /应用路径
```

# 部署系统

## 后端部署

* 打包工程文件

在 项目的 `bin`目录下执行 `package.bat`打包Web工程，生成war/jar包文件，生成在 `ruoyi/ruoyi-admin`模块下 `target`文件夹

* 部署工程文件

1、jar部署方式
使用命令行执行：`java –jar ruoyi.jar` 或者执行脚本：`ruoyi/bin/run.bat`

2、war部署方式
`ruoyi/pom.xml`中的 `packaging`修改为 `war`，放入 `tomcat`服务器 `webapps`

```xml
   <packaging>war</packaging>
```

提示

多模块版本在 `ruoyi/ruoyi-admin`模块下修改 `pom.xml`

* `SpringBoot`去除内嵌 `Tomcat`（PS：此步骤不重要，因为不排除也能在容器中部署 `war`）

```xml
<!-- 多模块排除内置tomcat -->
<dependency>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-web</artifactId>
	<exclusions>
		<exclusion>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-tomcat</artifactId>
		</exclusion>
	</exclusions>
</dependency>
	
<!-- 单应用排除内置tomcat -->	
<exclusions>
	<exclusion>
		<artifactId>spring-boot-starter-tomcat</artifactId>
		<groupId>org.springframework.boot</groupId>
	</exclusion>
</exclusions>
```

## 前端部署

当项目开发完毕，只需要运行一行命令就可以打包你的应用

```bash
# 打包正式环境
npm run build:prod

# 打包预发布环境
npm run build:stage
```

构建打包成功之后，会在根目录生成 `dist` 文件夹，里面就是构建打包好的文件，通常是 `***.js` 、`***.css`、`index.html` 等静态文件。

通常情况下 `dist` 文件夹的静态文件发布到你的 nginx 或者静态服务器即可，其中的 `index.html` 是后台服务的入口页面。
